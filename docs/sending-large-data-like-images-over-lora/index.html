<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Sending large data like images over Lora</title><link rel="stylesheet" href="./../assets/built/screen.css?v=85d7e3c861"><link rel="canonical" href="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="amphtml" href="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/amp/"><meta property="og:site_name" content="Small World"><meta property="og:type" content="article"><meta property="og:title" content="Sending large data like images over Lora"><meta property="og:description" content="Got obsessed with the Lora module E32-868T30D after playing with it for couple
of months now. To be honest, this seemed to me like a life saver for hobbyists
to start on RF. My previous attempts failed with I had to add RF to my projects.
This time it was"><meta property="og:url" content="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"><meta property="og:image" content="https://codetiger.github.io/blog/content/images/2021/11/IMG_1667-1.jpeg"><meta property="article:published_time" content="2021-12-06T13:13:23.000Z"><meta property="article:modified_time" content="2021-12-06T13:13:23.000Z"><meta property="article:tag" content="lora"><meta property="article:tag" content="raspberry pi"><meta property="article:tag" content="electronics"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Sending large data like images over Lora"><meta name="twitter:description" content="Got obsessed with the Lora module E32-868T30D after playing with it for couple
of months now. To be honest, this seemed to me like a life saver for hobbyists
to start on RF. My previous attempts failed with I had to add RF to my projects.
This time it was"><meta name="twitter:url" content="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"><meta name="twitter:image" content="https://codetiger.github.io/blog/content/images/2021/11/IMG_1667-1.jpeg"><meta name="twitter:label1" content="Written by"><meta name="twitter:data1" content="Harishankar"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="lora, raspberry pi, electronics"><meta name="twitter:site" content="@codetiger"><meta name="twitter:creator" content="@codetiger"><meta property="og:image:width" content="2000"><meta property="og:image:height" content="1500"><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Small World",
        "url": "https://codetiger.github.io/blog/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://codetiger.github.io/blog/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Harishankar",
        "image": {
            "@type": "ImageObject",
            "url": "https://codetiger.github.io/blog/content/images/2021/12/triangulated-image.jpg",
            "width": 768,
            "height": 849
        },
        "url": "https://codetiger.github.io/blog/author/codetiger/",
        "sameAs": [
            "https://twitter.com/codetiger"
        ]
    },
    "headline": "Sending large data like images over Lora",
    "url": "https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/",
    "datePublished": "2021-12-06T13:13:23.000Z",
    "dateModified": "2021-12-06T13:13:23.000Z",
    "keywords": "lora, raspberry pi, electronics",
    "description": "Got obsessed with the Lora module E32-868T30D after playing with it for couple\nof months now. To be honest, this seemed to me like a life saver for hobbyists\nto start on RF. My previous attempts failed with I had to add RF to my projects.\nThis time it was mostly a plug and play with simple configurations. \n\nSpeed: \nI read everywhere saying Lora is for smaller data packets and are not meant for\nlarger data like images. There were some calculations showing Lora would take\nhours or days to transfer",
    "mainEntityOfPage": "https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"
}</script><meta name="generator" content="Ghost 5.59"><link rel="alternate" type="application/rss+xml" title="Small World" href="https://codetiger.github.io/blog/rss/"><script defer="defer" src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="c2656377eaeb4efcb5165d9654" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://codetiger.github.io/blog/" crossorigin="anonymous"></script><link href="https://codetiger.github.io/blog/webmentions/receive/" rel="webmention"><script defer="defer" src="./../public/cards.min.js?v=85d7e3c861"></script><link rel="stylesheet" type="text/css" href="./../public/cards.min.css?v=85d7e3c861"><style type="text/css">/* Hide the Membership aka Subscribe actions etc. */
    #ghost-portal-root,
    a[href^="https://ghost.org"],
    a[href^="#/portal/signup"] { display: none; }
    .footer-cta { display: none; }</style><style>:root {--ghost-accent-color: #874efe;}</style></head><body class="post-template tag-lora tag-raspberry-pi tag-electronics is-head-middle-logo"><div class="gh-site"><header id="gh-head" class="gh-head gh-outer"><div class="gh-head-inner gh-inner"><div class="gh-head-brand"><div class="gh-head-brand-wrapper"><a class="gh-head-logo" href="https://codetiger.github.io/blog">Small World</a></div><button class="gh-search gh-icon-btn" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <button class="gh-burger"></button></div><nav class="gh-head-menu"><ul class="nav"><li class="nav-home"><a href="https://codetiger.github.io/blog/">Home</a></li><li class="nav-about"><a href="https://codetiger.github.io/blog/about-me/">About</a></li></ul></nav><div class="gh-head-actions"><button class="gh-search gh-icon-btn" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div></header><div class="site-content"><main class="site-main"><article class="gh-article post tag-lora tag-raspberry-pi tag-electronics no-image"><header class="gh-article-header gh-canvas"><span class="gh-article-meta">By <a href="./../author/codetiger/">Harishankar</a> in <a class="gh-article-tag" href="https://codetiger.github.io/blog/tag/lora/">lora</a> — <time datetime="2021-12-06">Dec 6, 2021</time></span><h1 class="gh-article-title">Sending large data like images over Lora</h1></header><div class="gh-content gh-canvas"><p>Got obsessed with the Lora module E32-868T30D after playing with it for couple of months now. To be honest, this seemed to me like a life saver for hobbyists to start on RF. My previous attempts failed with I had to add RF to my projects. This time it was mostly a plug and play with simple configurations.</p><h3 id="speed">Speed:</h3><p>I read everywhere saying Lora is for smaller data packets and are not meant for larger data like images. There were some calculations showing Lora would take hours or days to transfer a single image. These are not fully true and are mostly limited to certain providers. In my project I needed a P2P data transfer and it worked just fine.</p><p>Initially I started with transfering 40 bytes of sensor data every 5 seconds which worked just fine. After analysing the logs, I found that the Chip completes the air transmission in few milliseconds and just waits for more data. So I decided to push more data by breaking an image into chunks and rebuilding it on the receiver size.</p><p>An image of size 38KB takes me around 5 mins to transfer with enough delay inbetween to avoid the buffer overflows. There is no easy way to calculate the exact delay needed for each chunk to get transfered, or depending on AUX alone as well did not help my case much. So I've implemented a hybrid aproach that worked for me.</p><figure class="kg-card kg-image-card"><img src="./..//content/images/2021/12/latest-7.jpg" class="kg-image" alt loading="lazy" width="640" height="360" srcset="https://codetiger.github.io/blog/content/images/size/w600/2021/12/latest-7.jpg 600w, https://codetiger.github.io/blog/content/images/2021/12/latest-7.jpg 640w"></figure><h3 id="acknowledgement">Acknowledgement:</h3><p>In my implementation, the Lora class accepts file size of upto few megabytes and internally splits and sends it in chunks. The sender ensures if the chunk was received successfully by marking the chunk after getting an acknowledgement. The reason why AUX alone didn't work for me was, both the transceivers had to send and receive messages and the module didn't support duplex transmission. So a predefined interval of delay helped in my case. Otherwise, the 38KB image can be transferred in less than a minute.</p><h3 id="implementation">Implementation:</h3><p>The source code is available in my <a href="https://github.com/codetiger/rpi-hab/blob/main/lora.py?ref=localhost">Github project</a>. The Lora class uses SQLite for keeping track of chunks and acknowledgements. This class is the same as explained in my previous post where I've explained the basics <a href="https://codetiger.github.io/blog/transfer-images-over-lora-e32-module/">integrating E32-868T30D with Raspberry Pi</a></p><p>Using this implementation, I've run the project for couple days in a row and there was no issue in buffer overflow. So this code is tested well but feel free to improve if you can find issues.</p></div></article><div class="gh-canvas"><div class="navigation"><a class="navigation-item navigation-previous" href="./../transfer-images-over-lora-e32-module/"><span class="navigation-label">Previous</span><h4 class="navigation-title">Connecting Lora E32 module with Raspberry Pi</h4></a><a class="navigation-item navigation-next" href="./../interfacing-ublox-gps-m8n-with-raspberry-pi/"><span class="navigation-label">Next</span><h4 class="navigation-title">Interfacing Ublox GPS M8N with Raspberry Pi</h4></a></div></div><div class="related-wrapper gh-outer"><section class="related-posts gh-inner"><h3 class="related-title"><span class="text">You might also like...</span></h3><div class="post-feed"><article class="post tag-electronics tag-esp32 tag-raspberry-pi tag-epaper tag-eink tag-display u-shadow"><a class="post-link" href="./../remote-epaper-display-using-esp32/"><figure class="post-media"><div class="u-placeholder same-height rectangle"><img class="post-image u-object-fit" srcset="./../content/images/size/w400/2022/01/E695CC21-D1FA-4CEA-865C-77B266A02730_1_105_c.jpeg 400w, ./../content/images/size/w720/2022/01/E695CC21-D1FA-4CEA-865C-77B266A02730_1_105_c.jpeg 750w, ./../content/images/size/w960/2022/01/E695CC21-D1FA-4CEA-865C-77B266A02730_1_105_c.jpeg 960w, ./../content/images/size/w1200/2022/01/E695CC21-D1FA-4CEA-865C-77B266A02730_1_105_c.jpeg 1140w, ./../content/images/size/w2000/2022/01/E695CC21-D1FA-4CEA-865C-77B266A02730_1_105_c.jpeg 1920w" sizes="600px" src="./../content/images/size/w960/2022/01/E695CC21-D1FA-4CEA-865C-77B266A02730_1_105_c.jpeg" alt="Remote ePaper display using ESP32" loading="lazy"></div></figure><div class="post-wrapper"><header class="post-header"><span class="post-tag">electronics</span><h2 class="post-title">Remote ePaper display using ESP32</h2></header><div class="post-excerpt">I had a 7.8 inch ePaper display from Waveshare lying around</div></div><footer class="post-footer"><span class="post-more">Read More</span><div class="post-author"><span class="post-author-link"><img class="post-author-image" src="./../content/images/size/w150/2021/12/triangulated-image.jpg" alt="Harishankar" loading="lazy"></span></div></footer></a></article><article class="post tag-ralisat-1 tag-near-space tag-electronics tag-gps tag-lora tag-raspberry-pi no-image u-shadow"><a class="post-link" href="./../ralisat-1-payload-design/"><div class="post-wrapper"><header class="post-header"><span class="post-tag">RaLiSat-1</span><h2 class="post-title">RaLiSat-1 Payload system design</h2></header><div class="post-excerpt">To start with, I had basic goals for designing the payload system.</div></div><footer class="post-footer"><span class="post-more">Read More</span><div class="post-author"><span class="post-author-link"><img class="post-author-image" src="./../content/images/size/w150/2021/12/triangulated-image.jpg" alt="Harishankar" loading="lazy"></span></div></footer></a></article><article class="post tag-ralisat-1 tag-near-space tag-gps tag-lora tag-raspberry-pi u-shadow"><a class="post-link" href="./../dream-of-reaching-near-space-using-high-altitude-balloon/"><figure class="post-media"><div class="u-placeholder same-height rectangle"><img class="post-image u-object-fit" srcset="./../content/images/size/w400/2022/05/hab-15-175602-1.jpg 400w, ./../content/images/size/w720/2022/05/hab-15-175602-1.jpg 750w, ./../content/images/size/w960/2022/05/hab-15-175602-1.jpg 960w, ./../content/images/size/w1200/2022/05/hab-15-175602-1.jpg 1140w, ./../content/images/size/w2000/2022/05/hab-15-175602-1.jpg 1920w" sizes="600px" src="./../content/images/size/w960/2022/05/hab-15-175602-1.jpg" alt="The dream of reaching near space" loading="lazy"></div></figure><div class="post-wrapper"><header class="post-header"><span class="post-tag">RaLiSat-1</span><h2 class="post-title">The dream of reaching near space</h2></header><div class="post-excerpt">Story from 1990s: Around the 1990s, my parents moved to a rented</div></div><footer class="post-footer"><span class="post-more">Read More</span><div class="post-author"><span class="post-author-link"><img class="post-author-image" src="./../content/images/size/w150/2021/12/triangulated-image.jpg" alt="Harishankar" loading="lazy"></span></div></footer></a></article><article class="post tag-near-space tag-ralisat-1 tag-raspberry-pi tag-lora tag-electronics no-image u-shadow"><a class="post-link" href="./../ground-station/"><div class="post-wrapper"><header class="post-header"><span class="post-tag">Near Space</span><h2 class="post-title">RaLiSat-1 Base station system design</h2></header><div class="post-excerpt">For my high altitude balloon project, I am designing a portable base</div></div><footer class="post-footer"><span class="post-more">Read More</span><div class="post-author"><span class="post-author-link"><img class="post-author-image" src="./../content/images/size/w150/2021/12/triangulated-image.jpg" alt="Harishankar" loading="lazy"></span></div></footer></a></article></div></section></div></main></div><footer class="gh-foot gh-outer"><div class="gh-foot-inner gh-inner"><div class="gh-copyright">Small World © 2023</div><nav class="gh-foot-menu"></nav><div class="gh-powered-by"><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div></div></footer></div><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><script src="./../assets/built/main.min.js?v=85d7e3c861"></script></body></html>