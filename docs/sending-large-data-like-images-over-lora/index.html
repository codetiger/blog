<!DOCTYPE html>
<html lang="en" class="dark-mode">
<head>

    <title>Sending large data like images over Lora</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
        :root {
            --button-bg-color: #ffffff;
            --button-text-color: var(--color-darkgrey);
        }
    </style>

    <link rel="stylesheet" type="text/css" href="./../assets/built/screen.css?v=de44c31250" />

    <link rel="canonical" href="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/amp/" />
    
    <meta property="og:site_name" content="Small World" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Sending large data like images over Lora" />
    <meta property="og:description" content="Got obsessed with the Lora module E32-868T30D after playing with it for couple of months now. To be honest, this seemed to me like a life saver for hobbyists to start on RF. My previous attempts failed with I had to add RF to my projects. This time it was" />
    <meta property="og:url" content="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/" />
    <meta property="og:image" content="https://codetiger.github.io/blog/content/images/2021/11/IMG_1667-1.jpeg" />
    <meta property="article:published_time" content="2021-12-06T13:13:23.000Z" />
    <meta property="article:modified_time" content="2021-12-06T13:13:23.000Z" />
    <meta property="article:tag" content="lora" />
    <meta property="article:tag" content="raspberry pi" />
    <meta property="article:tag" content="electronics" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Sending large data like images over Lora" />
    <meta name="twitter:description" content="Got obsessed with the Lora module E32-868T30D after playing with it for couple of months now. To be honest, this seemed to me like a life saver for hobbyists to start on RF. My previous attempts failed with I had to add RF to my projects. This time it was" />
    <meta name="twitter:url" content="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/" />
    <meta name="twitter:image" content="https://codetiger.github.io/blog/content/images/2021/11/IMG_1667-1.jpeg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Harishankar" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="lora, raspberry pi, electronics" />
    <meta name="twitter:site" content="@codetiger" />
    <meta name="twitter:creator" content="@codetiger" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="1500" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Small World",
        "url": "https://codetiger.github.io/blog/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://codetiger.github.io/blog/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Harishankar",
        "image": {
            "@type": "ImageObject",
            "url": "https://codetiger.github.io/blog/content/images/2021/12/triangulated-image.jpg",
            "width": 768,
            "height": 849
        },
        "url": "https://codetiger.github.io/blog/author/codetiger/",
        "sameAs": [
            "https://twitter.com/codetiger"
        ]
    },
    "headline": "Sending large data like images over Lora",
    "url": "https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/",
    "datePublished": "2021-12-06T13:13:23.000Z",
    "dateModified": "2021-12-06T13:13:23.000Z",
    "keywords": "lora, raspberry pi, electronics",
    "description": "Got obsessed with the Lora module E32-868T30D after playing with it for couple\nof months now. To be honest, this seemed to me like a life saver for hobbyists\nto start on RF. My previous attempts failed with I had to add RF to my projects.\nThis time it was mostly a plug and play with simple configurations. \n\nSpeed: \nI read everywhere saying Lora is for smaller data packets and are not meant for\nlarger data like images. There were some calculations showing Lora would take\nhours or days to transfer",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://codetiger.github.io/blog/"
    }
}
    </script>

    <meta name="generator" content="Ghost 4.24" />
    <link rel="alternate" type="application/rss+xml" title="Small World" href="https://codetiger.github.io/blog/rss/" />
    
    <script async src="./../public/cards.min.js?v=de44c31250"></script>
    <link rel="stylesheet" type="text/css" href="./../public/cards.min.css?v=de44c31250">
    <style type='text/css'>
    /* Hide the Membership aka Subscribe actions etc. */
    #ghost-portal-root,
    a[href^="https://ghost.org"],
    a[href^="#/portal/signup"] { display: none; }
    .footer-cta { display: none; }
</style><style>:root {--ghost-accent-color: #874efe;}</style>

</head>
<body class="post-template tag-lora tag-raspberry-pi tag-electronics has-sans-body">
<div class="viewport">

    <header id="gh-head" class="gh-head has-cover">
        <nav class="gh-head-inner inner gh-container">

            <div class="gh-head-brand">
                <a class="gh-head-logo" href="https://codetiger.github.io/blog">
                        Small World
                </a>
                <a class="gh-burger" role="button">
                    <div class="gh-burger-box">
                        <div class="gh-burger-inner"></div>
                    </div>
                </a>
            </div>
            <div class="gh-head-menu">
                <ul class="nav">
    <li class="nav-home"><a href="https://codetiger.github.io/blog/">Home</a></li>
    <li class="nav-about"><a href="https://codetiger.github.io/blog/about-me/">About</a></li>
</ul>

            </div>
            <div class="gh-head-actions">
                <div class="gh-social">
                        <a class="gh-social-twitter" href="https://twitter.com/codetiger" title="Twitter" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
                </div>

                    <a class="gh-head-button" href="#/portal/signup">Subscribe</a>
            </div>
        </nav>
    </header>

    <div class="site-content">
        



<main id="site-main" class="site-main">
    <article class="article post tag-lora tag-raspberry-pi tag-electronics no-image ">

        <header class="article-header gh-canvas">

            <section class="article-tag">
                <a href="https://codetiger.github.io/blog/tag/lora/">lora</a>
            </section>

            <h1 class="article-title">Sending large data like images over Lora</h1>


            <div class="article-byline">
                <section class="article-byline-content">
                    <ul class="author-list">
                        <li class="author-list-item">
                            <a href="./../author/codetiger/" class="author-avatar">
                                <img class="author-profile-image" src="./../content/images/size/w100/2021/12/triangulated-image.jpg" alt="Harishankar" />
                            </a>
                        </li>
                    </ul>
                    <div class="article-byline-meta">
                        <h4 class="author-name"><a href="./../author/codetiger/">Harishankar</a></h4>
                        <div class="byline-meta-content">
                            <time class="byline-meta-date" datetime="2021-12-06">Dec 6, 2021</time>
                            <span class="byline-reading-time"><span class="bull">&bull;</span> 2 min read</span>
                        </div>
                    </div>
                </section>
            </div>

        </header>

        <section class="gh-content gh-canvas">
            <p>Got obsessed with the Lora module E32-868T30D after playing with it for couple of months now. To be honest, this seemed to me like a life saver for hobbyists to start on RF. My previous attempts failed with I had to add RF to my projects. This time it was mostly a plug and play with simple configurations. </p><h3 id="speed">Speed: </h3><p>I read everywhere saying Lora is for smaller data packets and are not meant for larger data like images. There were some calculations showing Lora would take hours or days to transfer a single image. These are not fully true and are mostly limited to certain providers. In my project I needed a P2P data transfer and it worked just fine. </p><p>Initially I started with transfering 40 bytes of sensor data every 5 seconds which worked just fine. After analysing the logs, I found that the Chip completes the air transmission in few milliseconds and just waits for more data. So I decided to push more data by breaking an image into chunks and rebuilding it on the receiver size. </p><p>An image of size 38KB takes me around 5 mins to transfer with enough delay inbetween to avoid the buffer overflows. There is no easy way to calculate the exact delay needed for each chunk to get transfered, or depending on AUX alone as well did not help my case much. So I've implemented a hybrid aproach that worked for me.</p><figure class="kg-card kg-image-card"><img src="./..//content/images/2021/12/latest-7.jpg" class="kg-image" alt loading="lazy" width="640" height="360" srcset="https://codetiger.github.io/blog/content/images/size/w600/2021/12/latest-7.jpg 600w, https://codetiger.github.io/blog/content/images/2021/12/latest-7.jpg 640w"></figure><h3 id="acknowledgement">Acknowledgement:</h3><p>In my implementation, the Lora class accepts file size of upto few megabytes and internally splits and sends it in chunks. The sender ensures if the chunk was received successfully by marking the chunk after getting an acknowledgement. The reason why AUX alone didn't work for me was, both the transceivers had to send and receive messages and the module didn't support duplex transmission. So a predefined interval of delay helped in my case. Otherwise, the 38KB image can be transferred in less than a minute. </p><h3 id="implementation">Implementation:</h3><p>The source code is available in my <a href="https://github.com/codetiger/rpi-hab/blob/main/lora.py">Github project</a>. The Lora class uses SQLite for keeping track of chunks and acknowledgements. This class is the same as explained in my previous post where I've explained the basics <a href="https://codetiger.github.io/blog/transfer-images-over-lora-e32-module/">integrating E32-868T30D with Raspberry Pi</a></p><p>Using this implementation, I've run the project for couple days in a row and there was no issue in buffer overflow. So this code is tested well but feel free to improve if you can find issues. </p>
        </section>


    </article>
</main>


    <section class="footer-cta ">
        <div class="inner">
            <h2>Sign up for more like this.</h2>
            <a class="footer-cta-button" href="#/portal">
                <div class="footer-cta-input">Enter your email</div>
                <span>Subscribe</span>
            </a>
        </div>
    </section>



<aside class="read-more-wrap">
    <div class="read-more inner">


                    
<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="./../ralisat-1-payload-design/">
            <header class="post-card-header">
                <h2 class="post-card-title">RaLiSat-1 Payload system design</h2>
            </header>
            <div class="post-card-excerpt">
                <p>To start with, I had basic goals for designing the payload system. Including basic sensors necessary for the tracking, camera to capture the beauty and the design to sustain the system at harsh climatic conditions in the sky.  Goals for the first flight:Use a single board computer of smallest</p>
            </div>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="./../author/codetiger/" class="static-avatar">
                        <img class="author-profile-image" src="./../content/images/size/w100/2021/12/triangulated-image.jpg" alt="Harishankar" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="./../author/codetiger/">Harishankar</a></span>
                <span class="post-card-byline-date"><time datetime="2021-12-12">Dec 12, 2021</time> <span class="bull">&bull;</span> 2 min read</span>
            </div>
        </footer>

    </div>

</article>
                    
<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="./../aquarium-automation-using-raspberry-pi/">
            <header class="post-card-header">
                <h2 class="post-card-title">Aquarium automation using Raspberry Pi</h2>
            </header>
            <div class="post-card-excerpt">
                <p>As a childhood desire, I always wanted to try setup an aquarium at my home. The desire was always there deep inside and never sparked until my daughter had to do some school activity on aquariums. So we decided to buy a small 10 liter aquarium tank with 3 molly</p>
            </div>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="./../author/codetiger/" class="static-avatar">
                        <img class="author-profile-image" src="./../content/images/size/w100/2021/12/triangulated-image.jpg" alt="Harishankar" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="./../author/codetiger/">Harishankar</a></span>
                <span class="post-card-byline-date"><time datetime="2021-12-08">Dec 8, 2021</time> <span class="bull">&bull;</span> 4 min read</span>
            </div>
        </footer>

    </div>

</article>
                    
<article class="post-card post no-image ">


    <div class="post-card-content">

        <a class="post-card-content-link" href="./../interfacing-ublox-gps-m8n-with-raspberry-pi/">
            <header class="post-card-header">
                <h2 class="post-card-title">Interfacing Ublox GPS M8N with Raspberry Pi</h2>
            </header>
            <div class="post-card-excerpt">
                <p>Ublox GPS M8N module support UART communication and its fairly integrate with your Raspberry Pi. Just connecting to power and Rx wires will allow you to read the GPS NMEA messages. However the module is much more capable than just sending messages in raw text format. The module supports lot</p>
            </div>
        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
                    <a href="./../author/codetiger/" class="static-avatar">
                        <img class="author-profile-image" src="./../content/images/size/w100/2021/12/triangulated-image.jpg" alt="Harishankar" />
                    </a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="./../author/codetiger/">Harishankar</a></span>
                <span class="post-card-byline-date"><time datetime="2021-12-08">Dec 8, 2021</time> <span class="bull">&bull;</span> 2 min read</span>
            </div>
        </footer>

    </div>

</article>

    </div>
</aside>


    </div>

    <footer class="site-footer outer">
        <div class="inner">
            <section class="copyright"><a href="https://codetiger.github.io/blog">Small World</a> &copy; 2021</section>
            <nav class="site-footer-nav">
                
            </nav>
            <div><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div>
        </div>
    </footer>

</div>


<script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous">
</script>
<script src="./../assets/built/casper.js?v=de44c31250"></script>
<script>
$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});
</script>



</body>
</html>
