<!DOCTYPE html><html lang="en" class="auto-color"><head><title>Sending large data like images over Lora</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="preload" as="style" href="./../assets/built/screen.css?v=dd065c6865"><link rel="preload" as="script" href="./../assets/built/casper.js?v=dd065c6865"><link rel="stylesheet" type="text/css" href="./../assets/built/screen.css?v=dd065c6865"><link rel="canonical" href="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="amphtml" href="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/amp/"><meta property="og:site_name" content="Small World"><meta property="og:type" content="article"><meta property="og:title" content="Sending large data like images over Lora"><meta property="og:description" content="Got obsessed with the Lora module E32-868T30D after playing with it for couple
of months now. To be honest, this seemed to me like a life saver for hobbyists
to start on RF. My previous attempts failed with I had to add RF to my projects.
This time it was"><meta property="og:url" content="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"><meta property="og:image" content="https://codetiger.github.io/blog/content/images/2021/11/IMG_1667-1.jpeg"><meta property="article:published_time" content="2021-12-06T13:13:23.000Z"><meta property="article:modified_time" content="2021-12-06T13:13:23.000Z"><meta property="article:tag" content="lora"><meta property="article:tag" content="raspberry pi"><meta property="article:tag" content="electronics"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Sending large data like images over Lora"><meta name="twitter:description" content="Got obsessed with the Lora module E32-868T30D after playing with it for couple
of months now. To be honest, this seemed to me like a life saver for hobbyists
to start on RF. My previous attempts failed with I had to add RF to my projects.
This time it was"><meta name="twitter:url" content="https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"><meta name="twitter:image" content="https://codetiger.github.io/blog/content/images/2021/11/IMG_1667-1.jpeg"><meta name="twitter:label1" content="Written by"><meta name="twitter:data1" content="Harishankar"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="lora, raspberry pi, electronics"><meta name="twitter:site" content="@codetiger"><meta name="twitter:creator" content="@codetiger"><meta property="og:image:width" content="2000"><meta property="og:image:height" content="1500"><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Small World",
        "url": "https://codetiger.github.io/blog/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://codetiger.github.io/blog/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Harishankar",
        "image": {
            "@type": "ImageObject",
            "url": "https://codetiger.github.io/blog/content/images/2021/12/triangulated-image.jpg",
            "width": 768,
            "height": 849
        },
        "url": "https://codetiger.github.io/blog/author/codetiger/",
        "sameAs": [
            "https://twitter.com/codetiger"
        ]
    },
    "headline": "Sending large data like images over Lora",
    "url": "https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/",
    "datePublished": "2021-12-06T13:13:23.000Z",
    "dateModified": "2021-12-06T13:13:23.000Z",
    "keywords": "lora, raspberry pi, electronics",
    "description": "Got obsessed with the Lora module E32-868T30D after playing with it for couple\nof months now. To be honest, this seemed to me like a life saver for hobbyists\nto start on RF. My previous attempts failed with I had to add RF to my projects.\nThis time it was mostly a plug and play with simple configurations. \n\nSpeed: \nI read everywhere saying Lora is for smaller data packets and are not meant for\nlarger data like images. There were some calculations showing Lora would take\nhours or days to transfer",
    "mainEntityOfPage": "https://codetiger.github.io/blog/sending-large-data-like-images-over-lora/"
}</script><meta name="generator" content="Ghost 5.59"><link rel="alternate" type="application/rss+xml" title="Small World" href="https://codetiger.github.io/blog/rss/"><script defer="defer" src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="c2656377eaeb4efcb5165d9654" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://codetiger.github.io/blog/" crossorigin="anonymous"></script><link href="https://codetiger.github.io/blog/webmentions/receive/" rel="webmention"><script defer="defer" src="./../public/cards.min.js?v=dd065c6865"></script><link rel="stylesheet" type="text/css" href="./../public/cards.min.css?v=dd065c6865"><style type="text/css">/* Hide the Membership aka Subscribe actions etc. */
    #ghost-portal-root,
    a[href^="https://ghost.org"],
    a[href^="#/portal/signup"] { display: none; }
    .footer-cta { display: none; }</style><style>:root {--ghost-accent-color: #874efe;}</style></head><body class="post-template tag-lora tag-raspberry-pi tag-electronics is-head-left-logo has-sans-body has-cover"><div class="viewport"><header id="gh-head" class="gh-head outer"><div class="gh-head-inner inner"><div class="gh-head-brand"><a class="gh-head-logo no-image" href="https://codetiger.github.io/blog">Small World </a><button class="gh-search gh-icon-btn" aria-label="Search this site" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button> <button class="gh-burger"></button></div><nav class="gh-head-menu"><ul class="nav"><li class="nav-home"><a href="https://codetiger.github.io/blog/">Home</a></li><li class="nav-about"><a href="https://codetiger.github.io/blog/about-me/">About</a></li></ul></nav><div class="gh-head-actions"><button class="gh-search gh-icon-btn" data-ghost-search><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></div></div></header><div class="site-content"><main id="site-main" class="site-main"><article class="article post tag-lora tag-raspberry-pi tag-electronics no-image"><header class="article-header gh-canvas"><div class="article-tag post-card-tags"><span class="post-card-primary-tag"><a href="./../tag/lora/">lora</a></span></div><h1 class="article-title">Sending large data like images over Lora</h1><div class="article-byline"><section class="article-byline-content"><ul class="author-list"><li class="author-list-item"><a href="./../author/codetiger/" class="author-avatar"><img class="author-profile-image" src="./../content/images/size/w100/2021/12/triangulated-image.jpg" alt="Harishankar"></a></li></ul><div class="article-byline-meta"><h4 class="author-name"><a href="./../author/codetiger/">Harishankar</a></h4><div class="byline-meta-content"><time class="byline-meta-date" datetime="2021-12-06">Dec 6, 2021</time> <span class="byline-reading-time"><span class="bull">&bull;</span> 2 min read</span></div></div></section></div></header><section class="gh-content gh-canvas"><p>Got obsessed with the Lora module E32-868T30D after playing with it for couple of months now. To be honest, this seemed to me like a life saver for hobbyists to start on RF. My previous attempts failed with I had to add RF to my projects. This time it was mostly a plug and play with simple configurations.</p><h3 id="speed">Speed:</h3><p>I read everywhere saying Lora is for smaller data packets and are not meant for larger data like images. There were some calculations showing Lora would take hours or days to transfer a single image. These are not fully true and are mostly limited to certain providers. In my project I needed a P2P data transfer and it worked just fine.</p><p>Initially I started with transfering 40 bytes of sensor data every 5 seconds which worked just fine. After analysing the logs, I found that the Chip completes the air transmission in few milliseconds and just waits for more data. So I decided to push more data by breaking an image into chunks and rebuilding it on the receiver size.</p><p>An image of size 38KB takes me around 5 mins to transfer with enough delay inbetween to avoid the buffer overflows. There is no easy way to calculate the exact delay needed for each chunk to get transfered, or depending on AUX alone as well did not help my case much. So I've implemented a hybrid aproach that worked for me.</p><figure class="kg-card kg-image-card"><img src="./../content/images/2021/12/latest-7.jpg" class="kg-image" alt loading="lazy" width="640" height="360" srcset="https://codetiger.github.io/blog/content/images/size/w600/2021/12/latest-7.jpg 600w, https://codetiger.github.io/blog/content/images/2021/12/latest-7.jpg 640w"></figure><h3 id="acknowledgement">Acknowledgement:</h3><p>In my implementation, the Lora class accepts file size of upto few megabytes and internally splits and sends it in chunks. The sender ensures if the chunk was received successfully by marking the chunk after getting an acknowledgement. The reason why AUX alone didn't work for me was, both the transceivers had to send and receive messages and the module didn't support duplex transmission. So a predefined interval of delay helped in my case. Otherwise, the 38KB image can be transferred in less than a minute.</p><h3 id="implementation">Implementation:</h3><p>The source code is available in my <a href="https://github.com/codetiger/rpi-hab/blob/main/lora.py?ref=localhost">Github project</a>. The Lora class uses SQLite for keeping track of chunks and acknowledgements. This class is the same as explained in my previous post where I've explained the basics <a href="https://codetiger.github.io/blog/transfer-images-over-lora-e32-module/">integrating E32-868T30D with Raspberry Pi</a></p><p>Using this implementation, I've run the project for couple days in a row and there was no issue in buffer overflow. So this code is tested well but feel free to improve if you can find issues.</p></section></article></main><aside class="read-more-wrap outer"><div class="read-more inner"><article class="post-card post keep-ratio"><a class="post-card-image-link" href="./../the-leopard-of-silence/"><img class="post-card-image" srcset="./../content/images/size/w300/2022/12/The-leopard-of-silence.jpeg 300w, ./../content/images/size/w600/2022/12/The-leopard-of-silence.jpeg 600w, ./../content/images/size/w1000/2022/12/The-leopard-of-silence.jpeg 1000w, ./../content/images/size/w2000/2022/12/The-leopard-of-silence.jpeg 2000w" sizes="(max-width: 1000px) 400px, 800px" src="./../content/images/size/w600/2022/12/The-leopard-of-silence.jpeg" alt="The Leopard of silence - Street Art in Bucharest" loading="lazy"></a><div class="post-card-content"><a class="post-card-content-link" href="./../the-leopard-of-silence/"><header class="post-card-header"><div class="post-card-tags"></div><h2 class="post-card-title">The Leopard of silence - Street Art in Bucharest</h2></header><div class="post-card-excerpt">Bucharest, Romania was very different than how I imagined. People were very cool, unjudgmental and very calm. Usually cities are very different as people tend to be fast and look in a hurry. The other thing I noticed is the graffiti all over the streets, which I ignored in the</div></a><footer class="post-card-meta"><time class="post-card-meta-date" datetime="2022-12-26">Dec 26, 2022</time> <span class="post-card-meta-length">3 min read</span></footer></div></article><article class="post-card post keep-ratio"><a class="post-card-image-link" href="./../dream-of-reaching-near-space-using-high-altitude-balloon/"><img class="post-card-image" srcset="./../content/images/size/w300/2022/05/hab-15-175602-1.jpg 300w, ./../content/images/size/w600/2022/05/hab-15-175602-1.jpg 600w, ./../content/images/size/w1000/2022/05/hab-15-175602-1.jpg 1000w, ./../content/images/size/w2000/2022/05/hab-15-175602-1.jpg 2000w" sizes="(max-width: 1000px) 400px, 800px" src="./../content/images/size/w600/2022/05/hab-15-175602-1.jpg" alt="The dream of reaching near space" loading="lazy"></a><div class="post-card-content"><a class="post-card-content-link" href="./../dream-of-reaching-near-space-using-high-altitude-balloon/"><header class="post-card-header"><div class="post-card-tags"></div><h2 class="post-card-title">The dream of reaching near space</h2></header><div class="post-card-excerpt">Story from 1990s: Around the 1990s, my parents moved to a rented house in the center of our home town Rajapalayam. Thats when I first met our landlord Mr.Rajalingam Raja who was a retired businessman. He closed his grocery store business and started doing small finance for the rest</div></a><footer class="post-card-meta"><time class="post-card-meta-date" datetime="2022-05-16">May 16, 2022</time> <span class="post-card-meta-length">4 min read</span></footer></div></article><article class="post-card post keep-ratio"><a class="post-card-image-link" href="./../building-a-retro-style-game-console-in-2022/"><img class="post-card-image" srcset="./../content/images/size/w300/2022/03/A453673D-B98D-45DF-BA7E-D77E3AA4F09B_1_201_a-3.jpg 300w, ./../content/images/size/w600/2022/03/A453673D-B98D-45DF-BA7E-D77E3AA4F09B_1_201_a-3.jpg 600w, ./../content/images/size/w1000/2022/03/A453673D-B98D-45DF-BA7E-D77E3AA4F09B_1_201_a-3.jpg 1000w, ./../content/images/size/w2000/2022/03/A453673D-B98D-45DF-BA7E-D77E3AA4F09B_1_201_a-3.jpg 2000w" sizes="(max-width: 1000px) 400px, 800px" src="./../content/images/size/w600/2022/03/A453673D-B98D-45DF-BA7E-D77E3AA4F09B_1_201_a-3.jpg" alt="Building a retro style game console from scratch" loading="lazy"></a><div class="post-card-content"><a class="post-card-content-link" href="./../building-a-retro-style-game-console-in-2022/"><header class="post-card-header"><div class="post-card-tags"></div><h2 class="post-card-title">Building a retro style game console from scratch</h2></header><div class="post-card-excerpt">I have always been and will ever be, passionate about gaming. The very first thing that inspired me into electronics and computers, was the fun around playing and building games. My most favourite hobby is programming a simple game whenever I pick up a new language or a computing platforms.</div></a><footer class="post-card-meta"><time class="post-card-meta-date" datetime="2022-03-12">Mar 12, 2022</time> <span class="post-card-meta-length">4 min read</span></footer></div></article></div></aside></div><footer class="site-footer outer"><div class="inner"><section class="copyright"><a href="https://codetiger.github.io/blog">Small World</a> &copy; 2023</section><nav class="site-footer-nav"></nav><div class="gh-powered-by"><a href="https://ghost.org/" target="_blank" rel="noopener">Powered by Ghost</a></div></div></footer></div><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="./../assets/built/casper.js?v=dd065c6865"></script><script>$(document).ready(function () {
    // Mobile Menu Trigger
    $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
    });
    // FitVids - Makes video embeds responsive
    $(".gh-content").fitVids();
});</script></body></html>